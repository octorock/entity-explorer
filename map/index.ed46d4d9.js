var e=new FileReader;e.onload=function(e){!function(e){let t=e.split("\n"),n=0,a=t[n];for(;!a.startsWith("rom");)n+=1,a=t[n];n+=1,a=t[n];for(;!a.startsWith("rom");)n+=1,a=t[n];console.log(a),n+=1,a=t[n];let o="UNKNOWN";l=[];for(;n<t.length&&!a.includes("debug_aranges");){if(a.startsWith(" ."));else if(a.startsWith("  ")){let e=a.split(/\W+/);if(3==e.length&&""!=e[2]){let t=parseInt(e[1],16);l.length>0&&(l[l.length-1].size=t-l[l.length-1].addr),l.push({addr:t,name:e[2],file:o,size:0})}}else a.startsWith(" *")||(o=a.split("(")[0].trim());n+=1,a=t[n]}console.log(l),d()}(e.target.result)};var t=document.getElementById("file");t.onchange=function(n){t.files.length>0&&(document.getElementById("symbol").innerHTML="Loading map...",e.readAsText(t.files[0]))};let n=134217728,l=[],a=1024,o=0;function d(){m=!1,document.getElementById("symbol").innerHTML="Painting map...",setTimeout((()=>{r()}),10)}let i={"^data/sound/.*":24,"data/gfx/sprite_gfx.o":5,"^data/gfx/.*":6,"^data/map/.*":20,"data/strings.o":5,"data/scripts.o":4,"^data/animations/.*":15,"^data/const/.*":14,"^asm/.*":13,"^data/.*":16,"^src/.*":3},c=["#daf5b1","#a4ed8b","#6ce67f","#3fcc94","#2bada2","#22768f","#183c7a","#291e58","#3b0137","#660653","#940f5a","#a6174c","#cc293f","#eb3636","#eb6746","#f5a762","#fcd87e","#fffa9e","#fffbc7","#fcfffd","#d6fcff","#b7d9f7","#95a4f0","#8775eb","#7e4ae0"];!function(){let e=document.createElement("div"),t=0;for(let n of c){let l=document.createElement("div");l.style.background=n,l.style.width="32px",l.style.height="32px",l.style.display="inline-block",l.id="color_"+t,l.innerHTML=""+t,l.style.textAlign="center",l.style.verticalAlign="center",l.style.lineHeight="32px",l.style.color="#000",t++,e.appendChild(l)}document.body.appendChild(e)}();for(let e=0;e<c.length;e++)c[e]=(s=c[e],f=void 0,(f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s))?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null);var s,f;function r(){if(0==l.length)return void(document.getElementById("symbol").innerHTML="");document.getElementById("offset").innerHTML="Offset: "+n.toString(16);let e=c[0],t=0,d=document.getElementById("pixels");var s=d.getContext("2d");let f=l[l.length-1].addr;a=(f-134217728)/1024+1,d.height=a;var r=s.getImageData(0,0,1024,a);let g=0;for(;g<l.length&&l[g].addr<n;)g++;if(g==l.length)return s.clearRect(0,0,1024,a),void console.error("End of usable symbols");let u=l[0].file,h="";for(let d=0;d<1024*a;d++){if(g<l.length&&n+d>=l[g].addr){switch(o){case 0:t=(t+1)%c.length,e=c[t];break;case 1:u!=l[g].file&&(t=(t+1)%c.length,e=c[t],u=l[g].file);break;case 2:if(u!=l[g].file){u=l[g].file;let n=u.substring(0,u.lastIndexOf("/"));n!=h&&(t=(t+1)%c.length,e=c[t],h=n)}break;case 3:if(u!=l[g].file){u=l[g].file;let t=!1;for(let n of Object.keys(i))if(u.match(n)){t=!0,e=c[i[n]];break}t||(e="#ff00ff")}}g++,g==l.length&&(e="#000000")}let a=e;r.data[4*d+0]=a.r,r.data[4*d+1]=a.g,r.data[4*d+2]=a.b,r.data[4*d+3]=255}s.putImageData(r,0,0),console.log((n+1024*a).toString(16)),document.getElementById("symbol").innerHTML="Done",m=!0}let m=!1;function g(e){document.getElementById("mode"+o).classList.remove("active"),o=e,document.getElementById("mode"+o).classList.add("active"),l.length>0&&d()}document.getElementById("mode0").onclick=()=>g(0),document.getElementById("mode1").onclick=()=>g(1),document.getElementById("mode2").onclick=()=>g(2),document.getElementById("mode3").onclick=()=>g(3),document.getElementById("pixels").onmousemove=function(e){if(!m)return;let t=e.target.getBoundingClientRect(),a=e.clientX-t.left,o=e.clientY-t.top,d=n+a+1024*o,i=0;for(;i<l.length&&l[i].addr<d;)i++;if(i==l.length)return void(document.getElementById("symbol").innerHTML="No symbol");let c=l[i-1];document.getElementById("symbol").innerHTML="0x"+d.toString(16)+" "+c.name+" "+c.file+" (+"+(d-c.addr)+"|"+c.size+")"},document.getElementById("pixels").onclick=function(){m=!m};
//# sourceMappingURL=index.ed46d4d9.js.map
