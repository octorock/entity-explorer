var e=new FileReader;e.onload=function(e){!function(e){let t=e.split("\n"),n=0,a=t[n];for(;!a.startsWith("rom");)n+=1,a=t[n];n+=1,a=t[n];for(;!a.startsWith("rom");)n+=1,a=t[n];console.log(a),n+=1,a=t[n];let d="UNKNOWN";l=[];for(;n<t.length&&!a.includes("debug_aranges");){if(a.startsWith(" ."));else if(a.startsWith("  ")){let e=a.split(/\W+/);if(3==e.length&&""!=e[2]){let t=parseInt(e[1],16);l.length>0&&(l[l.length-1].size=t-l[l.length-1].addr),l.push({addr:t,name:e[2],file:d,size:0})}}else a.startsWith(" *")||(d=a.split("(")[0].trim());n+=1,a=t[n]}console.log(l),o()}(e.target.result)};var t=document.getElementById("file");t.onchange=function(n){t.files.length>0&&(document.getElementById("symbol").innerHTML="Loading map...",e.readAsText(t.files[0]))};let n=134217728,l=[],a=1024,d=3;function o(){g=!1,document.getElementById("symbol").innerHTML="Painting map...",setTimeout((()=>{m()}),10)}let i={"^data/sound/.*":24,"data/gfx/sprite_gfx.o":5,"^data/gfx/.*":6,"^data/animations/.*":6,"^data/map/.*":21,"data/strings.o":2,"data/scripts.o":1,"^data/const/.*":14,"^asm/.*":13,"^data/.*":16,"^src/.*":3},s={Code:3,Scripts:1,Strings:2,"Unknown Data":16,Assembly:13,"Const Data":14,Map:21,Sprites:5,Graphics:6,Audio:24},r=["#daf5b1","#a4ed8b","#6ce67f","#3fcc94","#2bada2","#22768f","#183c7a","#291e58","#3b0137","#660653","#940f5a","#a6174c","#cc293f","#eb3636","#eb6746","#f5a762","#fcd87e","#fffa9e","#fffbc7","#fcfffd","#d6fcff","#b7d9f7","#95a4f0","#8775eb","#7e4ae0"];!function(){let e=document.createElement("div");e.id="legend";for(let t in s){let n=document.createElement("div");n.innerHTML=t,n.style.borderColor=r[s[t]],e.appendChild(n)}document.body.appendChild(e)}();for(let e=0;e<r.length;e++)r[e]=(c=r[e],f=void 0,(f=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16)}:null);var c,f;function m(){if(0==l.length)return void(document.getElementById("symbol").innerHTML="");document.getElementById("offset").innerHTML="Offset: "+n.toString(16);let e=r[0],t=0,o=document.getElementById("pixels");var s=o.getContext("2d");let c=l[l.length-1].addr;a=(c-134217728)/1024+1,o.height=a;var f=s.getImageData(0,0,1024,a);let m=0;for(;m<l.length&&l[m].addr<n;)m++;if(m==l.length)return s.clearRect(0,0,1024,a),void console.error("End of usable symbols");let u=l[0].file,h="";for(let o=0;o<1024*a;o++){if(m<l.length&&n+o>=l[m].addr){switch(d){case 0:t=(t+1)%r.length,e=r[t];break;case 1:u!=l[m].file&&(t=(t+1)%r.length,e=r[t],u=l[m].file);break;case 2:if(u!=l[m].file){u=l[m].file;let n=u.substring(0,u.lastIndexOf("/"));n!=h&&(t=(t+1)%r.length,e=r[t],h=n)}break;case 3:if(u!=l[m].file){u=l[m].file;let t=!1;for(let n of Object.keys(i))if(u.match(n)){t=!0,e=r[i[n]];break}t||(e="#ff00ff")}}m++,m==l.length&&(e="#000000")}let a=e;f.data[4*o+0]=a.r,f.data[4*o+1]=a.g,f.data[4*o+2]=a.b,f.data[4*o+3]=255}s.putImageData(f,0,0),console.log((n+1024*a).toString(16)),document.getElementById("symbol").innerHTML="Done",g=!0}let g=!1;function u(e){document.getElementById("mode"+d).classList.remove("active"),d=e,document.getElementById("mode"+d).classList.add("active"),l.length>0&&o(),document.getElementById("legend").style.display=3==d?"block":"none"}document.getElementById("mode0").onclick=()=>u(0),document.getElementById("mode1").onclick=()=>u(1),document.getElementById("mode2").onclick=()=>u(2),document.getElementById("mode3").onclick=()=>u(3),document.getElementById("pixels").onmousemove=function(e){if(!g)return;let t=e.target.getBoundingClientRect(),a=e.clientX-t.left,d=e.clientY-t.top,o=n+a+1024*d,i=0;for(;i<l.length&&l[i].addr<o;)i++;if(i==l.length)return void(document.getElementById("symbol").innerHTML="No symbol");let s=l[i-1];document.getElementById("symbol").innerHTML="0x"+o.toString(16)+" "+s.name+" "+s.file+" (+"+(o-s.addr)+"|"+s.size+")"},document.getElementById("pixels").onclick=function(){g=!g};
//# sourceMappingURL=index.232afd0c.js.map
