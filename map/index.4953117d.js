var e=new FileReader;e.onload=function(e){!function(e){let t=e.split("\n"),n=0,o=t[n];for(;!o.startsWith("rom");)n+=1,o=t[n];n+=1,o=t[n];for(;!o.startsWith("rom");)n+=1,o=t[n];console.log(o),n+=1,o=t[n];let a="UNKNOWN";l=[];for(;n<t.length&&!o.includes("debug_aranges");){if(o.startsWith(" ."));else if(o.startsWith("  ")){let e=o.split(/\W+/);if(3==e.length&&""!=e[2]){let t=parseInt(e[1],16);l.length>0&&(l[l.length-1].size=t-l[l.length-1].addr),l.push({addr:t,name:e[2],file:a,size:0})}}else o.startsWith(" *")||(a=o.split("(")[0].trim());n+=1,o=t[n]}console.log(l),d()}(e.target.result)};var t=document.getElementById("file");t.onchange=function(n){t.files.length>0&&(document.getElementById("symbol").innerHTML="Loading map...",e.readAsText(t.files[0]))};let n=134217728,l=[],o=1024,a=0;function d(){m=!1,document.getElementById("symbol").innerHTML="Painting map...",setTimeout((()=>{r()}),10)}let i={"data/sounds.o":24,"data/voicegroups.o":24,"data/strings.o":8,"data/scripts.o":5,"^data/animations/.*":15,"^data/const/.*":14,"^asm/.*":13,"^data/.*":16,"^src/.*":3},f=["#daf5b1","#a4ed8b","#6ce67f","#3fcc94","#2bada2","#22768f","#183c7a","#291e58","#3b0137","#660653","#940f5a","#a6174c","#cc293f","#eb3636","#eb6746","#f5a762","#fcd87e","#fffa9e","#fffbc7","#fcfffd","#d6fcff","#b7d9f7","#95a4f0","#8775eb","#7e4ae0"];for(let e=0;e<f.length;e++)f[e]=(s=f[e],c=void 0,(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s))?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null);var s,c;function r(){if(0==l.length)return void(document.getElementById("symbol").innerHTML="");document.getElementById("offset").innerHTML="Offset: "+n.toString(16);let e=f[0],t=0,d=document.getElementById("pixels");var s=d.getContext("2d");let c=l[l.length-1].addr;o=(c-134217728)/1024+1,d.height=o;var r=s.getImageData(0,0,1024,o);let g=0;for(;g<l.length&&l[g].addr<n;)g++;if(g==l.length)return s.clearRect(0,0,1024,o),void console.error("End of usable symbols");let u=l[0].file,h="";for(let d=0;d<1024*o;d++){if(g<l.length&&n+d>=l[g].addr){switch(a){case 0:t=(t+1)%f.length,e=f[t];break;case 1:u!=l[g].file&&(t=(t+1)%f.length,e=f[t],u=l[g].file);break;case 2:if(u!=l[g].file){u=l[g].file;let n=u.substring(0,u.lastIndexOf("/"));n!=h&&(t=(t+1)%f.length,e=f[t],h=n)}break;case 3:if(u!=l[g].file){u=l[g].file;let t=!1;for(let n of Object.keys(i))if(u.match(n)){t=!0,e=f[i[n]];break}t||(e="#ff00ff")}}g++,g==l.length&&(e="#000000")}let o=e;r.data[4*d+0]=o.r,r.data[4*d+1]=o.g,r.data[4*d+2]=o.b,r.data[4*d+3]=255}s.putImageData(r,0,0),console.log((n+1024*o).toString(16)),document.getElementById("symbol").innerHTML="Done",m=!0}let m=!1;function g(e){document.getElementById("mode"+a).classList.remove("active"),a=e,document.getElementById("mode"+a).classList.add("active"),l.length>0&&d()}document.getElementById("mode0").onclick=()=>g(0),document.getElementById("mode1").onclick=()=>g(1),document.getElementById("mode2").onclick=()=>g(2),document.getElementById("mode3").onclick=()=>g(3),document.getElementById("pixels").onmousemove=function(e){if(!m)return;let t=e.target.getBoundingClientRect(),o=e.clientX-t.left,a=e.clientY-t.top,d=n+o+1024*a,i=0;for(;i<l.length&&l[i].addr<d;)i++;if(i==l.length)return void(document.getElementById("symbol").innerHTML="No symbol");let f=l[i-1];document.getElementById("symbol").innerHTML="0x"+d.toString(16)+" "+f.name+" "+f.file+" (+"+(d-f.addr)+"|"+f.size+")"},document.getElementById("pixels").onclick=function(){m=!m};
//# sourceMappingURL=index.4953117d.js.map
